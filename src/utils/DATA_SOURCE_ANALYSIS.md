# æ¨èè¯¾ç¨‹æ•°æ®æ¥æºåˆ†æ

## ğŸ¯ æ ¸å¿ƒé—®é¢˜å›ç­”

**æ¨èè¯¾ç¨‹æ˜¯çœŸå®ä»åç«¯æ•°æ®åº“è·å–çš„ï¼Œä¸æ˜¯æ¨¡æ‹Ÿæ•°æ®ã€‚**

## ğŸ“Š æ•°æ®æµå‘åˆ†æ

### 1. æ¨èè¯¾ç¨‹åˆ—è¡¨ (`/api/courses/recommended`)
```javascript
// ğŸ” éœ€è¦ç”¨æˆ·è®¤è¯
const response = await courseApi.getRecommendedCourses()
// ğŸ“¡ è¯·æ±‚URL: http://192.168.1.165:8082/api/courses/recommended
// ğŸ”‘ éœ€è¦Authorization: Bearer {user_token}
```

**æ•°æ®æ¥æº**: âœ… **åç«¯æ•°æ®åº“**
- åŸºäºç”¨æˆ·å­¦ä¹ å†å²ã€å…´è¶£ç­‰ä¸ªæ€§åŒ–æ¨è
- JWT TokenéªŒè¯ç”¨æˆ·èº«ä»½
- åç«¯ç®—æ³•è®¡ç®—æ¨èç»“æœ
- **åŒ…å«å®Œæ•´çš„æŒ‡å¯¼æ•™å¸ˆä¿¡æ¯**

### 2. è¯¾ç¨‹è¯¦æƒ… (`/api/courses/{courseId}`)
```javascript
// ğŸ” éœ€è¦ç”¨æˆ·è®¤è¯  
const courseDetail = await courseApi.getCourseDetail(courseId)
// ğŸ“¡ è¯·æ±‚URL: http://192.168.1.165:8082/api/courses/{courseId}
// ğŸ”‘ éœ€è¦Authorization: Bearer {user_token}
```

**æ•°æ®æ¥æº**: âœ… **åç«¯æ•°æ®åº“**
- ä»æ•°æ®åº“è·å–å®Œæ•´è¯¾ç¨‹ä¿¡æ¯
- åŒ…å«**æŒ‡å¯¼æ•™å¸ˆ**ã€æè¿°ã€æ•™å­¦å¤§çº²ç­‰è¯¦ç»†å†…å®¹
- æ•™å¸ˆå­—æ®µ(`teacher`)ç›´æ¥ä»åç«¯æ•°æ®åº“è·å–

### 3. æ™®é€šè¯¾ç¨‹åˆ—è¡¨ (`/api/courses`)
```javascript
// ğŸ“š è·å–æ‰€æœ‰å¯é€‰è¯¾ç¨‹
const response = await courseApi.getCourses()
// ğŸ“¡ è¯·æ±‚URL: http://192.168.1.165:8082/api/courses
```

**æ•°æ®æ¥æº**: âœ… **åç«¯æ•°æ®åº“**
- æ‰€æœ‰å¯é€‰è¯¾ç¨‹çš„å®Œæ•´åˆ—è¡¨
- åŒ…å«è¯¾ç¨‹çŠ¶æ€ã€å®¹é‡ç­‰ä¿¡æ¯
- åŒ…å«æ¯ä¸ªè¯¾ç¨‹çš„æŒ‡å¯¼æ•™å¸ˆä¿¡æ¯

## ğŸ”„ Fallback æœºåˆ¶è¯´æ˜

### ä½•æ—¶ä½¿ç”¨ Fallback
1. **APIè°ƒç”¨å¤±è´¥æ—¶** (ç½‘ç»œé”™è¯¯ã€æœåŠ¡å™¨é”™è¯¯)
2. **è®¤è¯å¤±è´¥æ—¶** (Tokenè¿‡æœŸã€æ— æ•ˆToken)

### Fallback æ•°æ®æ¥æº
```javascript
// âŒ ä¸æ˜¯ä»æ¨¡æ‹Ÿæ•°æ®è·å–fallback
const fullCourse = allCourses.value.find(c => c.id === course.id) || course
```

**å…³é”®**: Fallbackä½¿ç”¨çš„æ˜¯ `allCourses.value`ï¼Œè€Œè¿™ä¸ªæ•°æ®ä¹Ÿæ˜¯ä»åç«¯APIè·å–çš„ï¼

## ğŸ‘¨â€ğŸ« æŒ‡å¯¼æ•™å¸ˆæ•°æ®æ¥æº

### æ¨èè¯¾ç¨‹ä¸­çš„æŒ‡å¯¼æ•™å¸ˆ
```javascript
// æ¨èè¯¾ç¨‹APIè¿”å›çš„æ•™å¸ˆæ•°æ®
console.log('ğŸ“‹ æ¨èè¯¾ç¨‹è¯¦æƒ…:', courses.map(c => ({
  id: c.id,
  name: c.name,
  teacher: c.teacher,        // ä»åç«¯æ•°æ®åº“è·å–
  hasTeacher: !!c.teacher,    // éªŒè¯æ•™å¸ˆå­—æ®µå­˜åœ¨
  recommendReason: c.recommendReason
})))
```

**æ•™å¸ˆå­—æ®µå¤„ç†é€»è¾‘**:
```javascript
// ç¡®ä¿æ•™å¸ˆå­—æ®µä»åç«¯æ•°æ®ä¸­è·å–
teacher: course.teacher || (fullCourse?.teacher) || 'æœªçŸ¥æ•™å¸ˆ'
```

### è¯¾ç¨‹è¯¦æƒ…ä¸­çš„æŒ‡å¯¼æ•™å¸ˆ
åœ¨è¯¾ç¨‹è¯¦æƒ…å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºï¼š
```vue
<el-descriptions-item label="æŒ‡å¯¼æ•™å¸ˆ">
  {{ selectedCourseDetail.teacher || 'æœªçŸ¥æ•™å¸ˆ' }}
</el-descriptions-item>
```

**æ•°æ®éªŒè¯**:
```javascript
console.log('ğŸ‘¨â€ğŸ« æ¨èè¯¾ç¨‹ä¸­çš„æŒ‡å¯¼æ•™å¸ˆæ•°æ®æ¥æºï¼šåç«¯æ•°æ®åº“')
```

## ğŸ“‹ ä»£ç è¯æ®

### æ¨èè¯¾ç¨‹è·å–
```javascript
const response = await courseApi.getRecommendedCourses()
console.log('ğŸ“Š æ¨èè¯¾ç¨‹æ•°æ®æ¥æºï¼šåç«¯æ•°æ®åº“ (éæ¨¡æ‹Ÿæ•°æ®)')
```

### è¯¾ç¨‹è¯¦æƒ…è·å–  
```javascript
const response = await courseApi.getCourseDetail(course.id)
console.log('âœ… ä»åç«¯è·å–åˆ°çš„è¯¾ç¨‹è¯¦æƒ…:', courseDetail)
```

### æ™®é€šè¯¾ç¨‹è·å–
```javascript
const response = await courseApi.getCourses()
console.log('ğŸ“ è¯¾ç¨‹åˆ—è¡¨å“åº”:', response)
```

## ğŸ›¡ï¸ è®¤è¯ä¿æŠ¤

### TokenéªŒè¯
```javascript
// ç”¨æˆ·ç™»å½•åè·å–ä¸“å±token
tokenManager.setToken(data.token, data.refreshToken)

// æ‰€æœ‰æ¨èè¯¾ç¨‹ç›¸å…³APIéƒ½éœ€è¦token
if (tokenManager.isAuthenticated()) {
  const courses = await courseApi.getRecommendedCourses()
}
```

### APIè®¤è¯è¦æ±‚
- `GET /api/courses/recommended` ğŸ” **éœ€è¦è®¤è¯**
- `GET /api/courses/{id}` ğŸ” **éœ€è¦è®¤è¯** 
- `GET /api/courses` âœ… **æ— éœ€è®¤è¯**

## ğŸ“ æ—¥å¿—è¾“å‡ºç¤ºä¾‹

### æˆåŠŸè·å–æ¨èè¯¾ç¨‹
```
ğŸ“¡ è°ƒç”¨æ¨èè¯¾ç¨‹API: /courses/recommended
ğŸ”‘ è®¤è¯çŠ¶æ€: å·²è®¤è¯
âœ… æ¨èè¯¾ç¨‹APIè°ƒç”¨æˆåŠŸï¼Œç”¨æˆ·tokenéªŒè¯é€šè¿‡
ğŸ“Š æ¨èè¯¾ç¨‹æ•°æ®æ¥æºï¼šåç«¯æ•°æ®åº“ (éæ¨¡æ‹Ÿæ•°æ®)
ğŸ” åç«¯è¿”å›çš„è¯¾ç¨‹æ•°é‡: 5
ğŸ“‹ æ¨èè¯¾ç¨‹è¯¦æƒ…: [...]
```

### æˆåŠŸè·å–è¯¾ç¨‹è¯¦æƒ…
```
ğŸ” è·å–è¯¾ç¨‹è¯¦æƒ…: /courses/123
ğŸ“ è¯¾ç¨‹è¯¦æƒ…APIå“åº”: {...}
âœ… ä»åç«¯è·å–åˆ°çš„è¯¾ç¨‹è¯¦æƒ…: {...}
ğŸ“‹ æœ€ç»ˆå±•ç¤ºçš„è¯¾ç¨‹è¯¦æƒ…: {...}
```

## âŒ å¸¸è§è¯¯è§£

### è¯¯è§£1: "æ¨èè¯¾ç¨‹æ˜¯æ¨¡æ‹Ÿæ•°æ®"
**äº‹å®**: âŒ é”™è¯¯
- æ¨èè¯¾ç¨‹å®Œå…¨æ¥è‡ªåç«¯ `/api/courses/recommended`
- éœ€è¦ç”¨æˆ·Tokenè®¤è¯
- åŸºäºç”¨æˆ·æ•°æ®çš„ä¸ªæ€§åŒ–æ¨è

### è¯¯è§£2: "fallbackæ•°æ®æ˜¯æ¨¡æ‹Ÿæ•°æ®"  
**äº‹å®**: âŒ é”™è¯¯
- Fallbackä½¿ç”¨ `allCourses.value` æ•°æ®
- `allCourses` æ¥è‡ªåç«¯ `/api/courses` æ¥å£
- åªæ˜¯å·²è·å–æ•°æ®çš„ç¼“å­˜ä½¿ç”¨

## âœ… ç»“è®º

**æ¨èè¯¾ç¨‹100%æ¥è‡ªåç«¯æ•°æ®åº“ï¼Œä¸æ˜¯æ¨¡æ‹Ÿæ•°æ®**
**æŒ‡å¯¼æ•™å¸ˆä¿¡æ¯100%æ¥è‡ªåç«¯æ•°æ®åº“ï¼Œä¸æ˜¯æ¨¡æ‹Ÿæ•°æ®**

### æ•°æ®æµç¨‹
1. ç”¨æˆ·ç™»å½• â†’ è·å–ä¸“å±Token
2. TokenéªŒè¯ â†’ è°ƒç”¨ `/api/courses/recommended`
3. åç«¯ç®—æ³• â†’ åŸºäºç”¨æˆ·æ•°æ®ç”Ÿæˆæ¨è
4. è¿”å›ç»“æœ â†’ ä¸ªæ€§åŒ–æ¨èè¯¾ç¨‹åˆ—è¡¨ï¼ˆåŒ…å«æŒ‡å¯¼æ•™å¸ˆï¼‰
5. ç‚¹å‡»è¯¾ç¨‹ â†’ è°ƒç”¨ `/api/courses/{id}` è·å–è¯¦æƒ…
6. å±•ç¤ºç•Œé¢ â†’ å®Œæ•´çš„åç«¯æ•°æ®ï¼ˆåŒ…å«æŒ‡å¯¼æ•™å¸ˆä¿¡æ¯ï¼‰

### å®‰å…¨ä¿éšœ
- ğŸ” JWT Tokenè®¤è¯ä¿æŠ¤
- ğŸ”„ è‡ªåŠ¨Tokenåˆ·æ–°æœºåˆ¶  
- ğŸ›¡ï¸ 401/403é”™è¯¯å¤„ç†
- ğŸ“± å®Œæ•´çš„é”™è¯¯æ¢å¤

---

**æ€»ç»“**: æ‰€æœ‰æ¨èè¯¾ç¨‹ç›¸å…³æ•°æ®éƒ½æ¥è‡ªåç«¯æ•°æ®åº“ï¼Œé€šè¿‡å®‰å…¨çš„APIè·å–ï¼Œä½¿ç”¨ç”¨æˆ·ä¸“å±Tokenè¿›è¡Œè®¤è¯å’Œä¸ªæ€§åŒ–æ¨èã€‚

### ğŸ“ å…³äºæŒ‡å¯¼æ•™å¸ˆæ•°æ®çš„é‡è¦è¯´æ˜

âœ… **æ¨èè¯¾ç¨‹ä¸­çš„æŒ‡å¯¼æ•™å¸ˆä¿¡æ¯å®Œå…¨æ¥è‡ªåç«¯æ•°æ®åº“**
- æ•™å¸ˆå§“åå­—æ®µ(`teacher`)ç”±åç«¯API `/courses/recommended` è¿”å›
- æ•™å¸ˆä¿¡æ¯åœ¨è¯¾ç¨‹è¯¦æƒ…é¡µé¢ `/courses/{id}` ä¸­å®Œæ•´å±•ç¤º
- æ— ä»»ä½•æ¨¡æ‹Ÿæˆ–ç¡¬ç¼–ç çš„æ•™å¸ˆæ•°æ®

âœ… **æ•™å¸ˆæ•°æ®å¤„ç†ä¼˜å…ˆçº§**
1. ä¼˜å…ˆä½¿ç”¨æ¨èè¯¾ç¨‹APIè¿”å›çš„æ•™å¸ˆä¿¡æ¯
2. Fallbackåˆ°æ™®é€šè¯¾ç¨‹åˆ—è¡¨ä¸­çš„æ•™å¸ˆä¿¡æ¯  
3. æœ€åä½¿ç”¨é»˜è®¤å€¼"æœªçŸ¥æ•™å¸ˆ"

âœ… **æ•°æ®å®Œæ•´æ€§ä¿è¯**
```javascript
// æ¨èè¯¾ç¨‹å¤„ç†
teacher: course.teacher || (fullCourse?.teacher) || 'æœªçŸ¥æ•™å¸ˆ'

// è¯¾ç¨‹è¯¦æƒ…å¤„ç†  
teacher: courseDetail.teacher || course.teacher || 'æœªçŸ¥æ•™å¸ˆ'
```

**ç»“è®º**: æ¨èè¯¾ç¨‹ä¸­çš„æŒ‡å¯¼æ•™å¸ˆä¿¡æ¯ä¸è¯¾ç¨‹æœ¬èº«çš„æ‰€æœ‰æ•°æ®ä¸€æ ·ï¼Œéƒ½ä»åç«¯æ•°æ®åº“å®æ—¶è·å–ï¼Œç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œä¸€è‡´æ€§ã€‚